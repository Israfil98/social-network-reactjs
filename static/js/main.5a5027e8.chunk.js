(this["webpackJsonpsocial-network-js"]=this["webpackJsonpsocial-network-js"]||[]).push([[0],{126:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i}));var r=n(33),a=n(5),c="dialogs/SEND_MESSAGE",o={dialogsData:[{id:1,name:"UserName1"},{id:2,name:"UserName2"},{id:3,name:"UserName3"}],messagesData:[{id:1,messageBody:"Hello"},{id:2,messageBody:"React is a nice Library"},{id:3,messageBody:"Method map is improves performance"}]},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:var n={id:4,messageBody:t.newMessageBodyTextValue},s=Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[n])});return s;default:return e}},i=function(e){return{type:c,newMessageBodyTextValue:e}}},127:function(e,t,n){"use strict";n.d(t,"d",(function(){return m})),n.d(t,"b",(function(){return w})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return N}));var r=n(10),a=n.n(r),c=n(15),o=n(33),s=n(5),i=n(16),u="users/FOLLOW",l="users/UNFOLLOW",d="users/SET_CURRENT_PAGE",f="users/SET_TOTAL_USERS_COUNT",j="users/SET_USERS",p="users/SET_FETCHING",b="users/SET_FOLLOWING_PROGRESS",O={currentPage:1,pageSize:10,totalUsersCount:0,portionSize:10,usersData:[],isFetching:!1,isFollowingProgress:[]},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n=Object(s.a)(Object(s.a)({},e),{},{usersData:e.usersData.map((function(e){return e.id===t.userId?Object(s.a)(Object(s.a)({},e),{},{followed:!0}):e}))});return n;case l:var r=Object(s.a)(Object(s.a)({},e),{},{usersData:e.usersData.map((function(e){return e.id===t.userId?Object(s.a)(Object(s.a)({},e),{},{followed:!1}):e}))});return r;case j:var a=Object(s.a)(Object(s.a)({},e),{},{usersData:t.usersData});return a;case d:var c=Object(s.a)(Object(s.a)({},e),{},{currentPage:t.currentPage});return c;case f:var i=Object(s.a)(Object(s.a)({},e),{},{totalUsersCount:t.totalCount});return i;case p:var m=Object(s.a)(Object(s.a)({},e),{},{isFetching:t.isFetching});return m;case b:var h=Object(s.a)(Object(s.a)({},e),{},{isFollowingProgress:t.isFollowing?[].concat(Object(o.a)(e.isFollowingProgress),[t.userId]):e.isFollowingProgress.filter((function(e){return e!==t.userId}))});return h;default:return e}},h=function(e){return{type:u,userId:e}},v=function(e){return{type:l,userId:e}},g=function(e){return{type:d,currentPage:e}},x=function(e){return{type:p,isFetching:e}},_=function(e,t){return{type:b,isFollowing:e,userId:t}},w=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(x(!0)),r(g(e)),n.next=4,i.c.getUsers(e,t);case 4:c=n.sent,r(x(!1)),r((o=c.items,{type:j,usersData:o})),r((a=c.totalCount,{type:f,totalCount:a}));case 8:case"end":return n.stop()}var a,o}),n)})));return function(e){return n.apply(this,arguments)}}()},y=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0,e)),t.next=3,i.c.follow(e);case 3:0==t.sent.data.resultCode&&n(h(e)),n(_(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},N=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(!0,e)),t.next=3,i.c.unfollow(e);case 3:0==t.sent.data.resultCode&&n(v(e)),n(_(!1,e));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},16:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return s}));var r=n(132),a=n.n(r).a.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"d827073a-674e-40e9-bfc0-11166191e80b"}}),c={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return a.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return a.post("follow/".concat(e),{})},unfollow:function(e){return a.delete("follow/".concat(e))}},o={getProfile:function(e){return a.get("profile/".concat(e))},getStatus:function(e){return a.get("/profile/status/".concat(e))},updateStatus:function(e){return a.put("/profile/status/",{status:e})}},s={getMe:function(){return a.get("auth/me")},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return a.post("auth/login",{email:e,password:t,rememberMe:n})},logout:function(){return a.delete("auth/login")}}},172:function(e,t,n){},173:function(e,t,n){},18:function(e,t,n){e.exports={nav:"Nav_nav__3gICw",navMenu:"Nav_navMenu__1I7oN",navItem:"Nav_navItem__1C5nY",navLink:"Nav_navLink__3id47",active:"Nav_active__XSt-p"}},26:function(e,t,n){e.exports={container:"Login_container__1Oz4Y",title:"Login_title__bh47u",formContainer:"Login_formContainer__1sShP",input:"Login_input__1zhXD",btn:"Login_btn__172Gj",commonError:"Login_commonError__qsn4C"}},293:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(64),o=n.n(c),s=n(24),i=n(14),u=(n(172),n(51)),l=n(52),d=n(54),f=n(53),j=n(8),p=(n(173),n(9)),b=n(5),O=n(10),m=n.n(O),h=n(15),v=n(16),g=n(55),x="auth/SET_USER_DATA",_={userId:null,login:null,email:null,isAuth:!1},w=function(e,t,n,r){return{type:x,payload:{userId:e,login:t,email:n,isAuth:r}}},y=function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){var n,r,a,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.getMe();case 2:0===(n=e.sent).data.resultCode&&(r=n.data.data,a=r.email,c=r.id,o=r.login,t(w(c,o,a,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},N=function(){return function(){var e=Object(h.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.logout();case 2:0===e.sent.data.resultCode&&t(w(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S="app/SET_INITIALIZED",C={initialized:!1},k=function(){return function(e){var t=e(y());Promise.all([t]).then((function(){e({type:S})}))}},I=n(305),E=n(18),L=n.n(E),D=n(2),T=function(){return Object(D.jsx)("nav",{className:L.a.nav,children:Object(D.jsxs)("ul",{className:L.a.navMenu,children:[Object(D.jsx)("li",{className:L.a.navItem,children:Object(D.jsx)(s.b,{className:L.a.navLink,to:"/profile",activeClassName:L.a.active,children:"My profile"})}),Object(D.jsx)("li",{className:L.a.navItem,children:Object(D.jsx)(s.b,{className:L.a.navLink,to:"/dialogs",activeClassName:L.a.active,children:"Messages"})}),Object(D.jsx)("li",{className:L.a.navItem,children:Object(D.jsx)(s.b,{className:L.a.navLink,to:"/users",activeClassName:L.a.active,children:"Users"})})]})})},P=n.p+"static/media/atom.e5f031c5.svg",A=n(39),F=n.n(A),U=a.a.memo((function(e){return Object(D.jsx)("header",{className:F.a.header,children:Object(D.jsxs)("div",{className:F.a.container,children:[Object(D.jsx)("img",{className:F.a.logo,src:P,alt:""}),Object(D.jsx)("div",{className:F.a.loginBlock,children:e.isAuth?Object(D.jsxs)("div",{children:[e.login,Object(D.jsx)("button",{className:F.a.logout,onClick:e.logout,children:"log out"})]}):Object(D.jsx)(s.b,{to:"/login",children:"Login"})})]})})})),M=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(D.jsx)(U,Object(b.a)({},this.props))}}]),n}(a.a.Component),z=Object(i.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),(function(e){return{logout:function(){e(N())}}}))(M),R=n(26),B=n.n(R),H=n(128),G=n(129),V=n(65),W=n(72),J=function(e){return Object(D.jsxs)("form",{onSubmit:e.handleSubmit,className:B.a.formContainer,children:[Object(D.jsx)("div",{children:Object(D.jsx)(H.a,{component:V.a,validate:[W.b],name:"email",className:B.a.input,placeholder:"Enter email"})}),Object(D.jsx)("div",{children:Object(D.jsx)(H.a,{component:V.a,validate:[W.b],name:"password",type:"password",className:B.a.input,placeholder:"Enter password"})}),Object(D.jsxs)("div",{children:[Object(D.jsx)(H.a,{component:V.a,name:"rememberMe",type:"checkbox"}),"Remember me"]}),e.error&&Object(D.jsx)("div",{className:B.a.commonError,children:e.error}),Object(D.jsx)("button",{className:B.a.btn,children:"Login"})]})},K=Object(G.a)({form:"login"})(J),Y=a.a.memo((function(e){return e.isAuth?Object(D.jsx)(j.a,{to:"/profile"}):Object(D.jsxs)("div",{className:B.a.container,children:[Object(D.jsx)("h1",{className:B.a.title,children:"Login"}),Object(D.jsx)(K,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),q=Object(i.b)((function(e){return{isAuth:e.auth.isAuth}}),(function(e){return{login:function(t,n,r){e(function(e,t,n){return function(){var r=Object(h.a)(m.a.mark((function r(a){var c,o;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.a.login(e,t,n);case 2:0===(c=r.sent).data.resultCode?a(y()):(o=c.data.messages.length>0?c.data.messages[0]:"Some error",a(Object(g.a)("login",{_error:o})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(t,n,r))},logout:function(){e(N())}}}))(Y),X=a.a.lazy((function(){return n.e(3).then(n.bind(null,319))})),Z=a.a.lazy((function(){return n.e(4).then(n.bind(null,320))})),Q=a.a.lazy((function(){return n.e(5).then(n.bind(null,321))})),$=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(D.jsxs)("div",{className:"app-wrapper",children:[Object(D.jsx)(z,{}),Object(D.jsx)(T,{}),Object(D.jsxs)("div",{className:"app-wrapper-content",children:[Object(D.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(D.jsx)(a.a.Suspense,{fallback:Object(D.jsx)(I.a,{}),children:Object(D.jsx)(X,{})})}}),Object(D.jsx)(j.b,{path:"/dialogs",render:function(){return Object(D.jsx)(a.a.Suspense,{fallback:Object(D.jsx)(I.a,{}),children:Object(D.jsx)(Q,{})})}}),Object(D.jsx)(j.b,{path:"/users",render:function(){return Object(D.jsx)(a.a.Suspense,{fallback:Object(D.jsx)(I.a,{}),children:Object(D.jsx)(Z,{})})}}),Object(D.jsx)(j.b,{path:"/login",render:function(){return Object(D.jsx)(q,{})}})]})]}):Object(D.jsx)(I.a,{})}}]),n}(a.a.Component),ee=Object(p.d)(j.f,Object(i.b)((function(e){return{initialized:e.app.initialized}}),(function(e){return{initializeApp:function(){e(k())}}})))($),te=n(138),ne=n(95),re=n(126),ae=n(127),ce=n(130),oe=Object(p.c)({profilePage:ne.e,dialogsPage:re.a,usersPage:ae.d,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:var n=Object(b.a)(Object(b.a)({},e),t.payload);return n;default:return e}},form:ce.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(b.a)(Object(b.a)({},e),{},{initialized:!0});default:return e}}}),se=Object(p.e)(oe,Object(p.a)(te.a));window.store=se,o.a.render(Object(D.jsx)(s.a,{children:Object(D.jsx)(i.a,{store:se,children:Object(D.jsx)(ee,{})})}),document.getElementById("root"))},39:function(e,t,n){e.exports={header:"Header_header__1VCKf",container:"Header_container__1VC87",logo:"Header_logo__3_SJs",loginBlock:"Header_loginBlock__6mma5",navItem:"Header_navItem__38LDp",navLink:"Header_navLink__Sd-O5",logout:"Header_logout__1UGPC"}},50:function(e,t,n){e.exports={formControl:"FormsControls_formControl__3oI2W",error:"FormsControls_error__9lcue"}},65:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u}));var r=n(5),a=n(94),c=(n(0),n(50)),o=n.n(c),s=n(2),i=function(e){var t=e.input,n=e.meta,c=Object(a.a)(e,["input","meta"]);return Object(s.jsxs)("div",{className:o.a.formControl+" "+(n.touched&&n.error?o.a.error:""),children:[Object(s.jsx)("div",{children:Object(s.jsx)("textarea",Object(r.a)(Object(r.a)({},t),c))}),n.touched&&n.error&&Object(s.jsx)("span",{children:n.error})]})},u=function(e){var t=e.input,n=e.meta,c=Object(a.a)(e,["input","meta"]);return Object(s.jsxs)("div",{className:o.a.formControl+" "+(n.touched&&n.error?o.a.error:""),children:[Object(s.jsx)("div",{children:Object(s.jsx)("input",Object(r.a)(Object(r.a)({},t),c))}),n.touched&&n.error&&Object(s.jsx)("span",{children:n.error})]})}},72:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return e?void 0:"Field is required"},a=function(e){return function(t){return t.length>e?"The maximum number of words has been exceeded. Maximum length ".concat(e):void 0}}},95:function(e,t,n){"use strict";n.d(t,"e",(function(){return b})),n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return x})),n.d(t,"g",(function(){return _}));var r=n(10),a=n.n(r),c=n(15),o=n(33),s=n(5),i=n(16),u="profile/ADD_POST",l="profile/SET_USER_PROFILE",d="profile/SET_STATUS",f="profile/DELETE_POST",j="profile/SET_LIKE",p={postsData:[{id:1,postText:"Hi, im React Developer",likesCount:1},{id:2,postText:"Im learning React a few month",likesCount:2},{id:3,postText:"Method map!!!",likesCount:5}],profile:null,status:""},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:var n={id:4,postText:t.newPostTextValue,likesCount:0},r=Object(s.a)(Object(s.a)({},e),{},{postsData:Object(o.a)(e.postsData)});return r.postsData=[n].concat(Object(o.a)(r.postsData)),r;case f:return Object(s.a)(Object(s.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.postId}))});case l:var a=Object(s.a)(Object(s.a)({},e),{},{profile:t.profile});return a;case d:var c=Object(s.a)(Object(s.a)({},e),{},{status:t.status});return c;case j:return Object(s.a)(Object(s.a)({},e),{},{postsData:e.postsData.map((function(e){return e.id===t.postId?Object(s.a)(Object(s.a)({},e),{},{likesCount:t.newLike+1}):e}))});default:return e}},O=function(e){return{type:u,newPostTextValue:e}},m=function(e){return{type:f,postId:e}},h=function(e,t){return{type:j,newLike:e,postId:t}},v=function(e){return{type:d,status:e}},g=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getProfile(e);case 2:r=t.sent,n((a=r.data,{type:l,profile:a}));case 4:case"end":return t.stop()}var a}),t)})));return function(e){return t.apply(this,arguments)}}()},x=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.getStatus(e);case 2:r=t.sent,n(v(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(v(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}},[[293,1,2]]]);
//# sourceMappingURL=main.5a5027e8.chunk.js.map